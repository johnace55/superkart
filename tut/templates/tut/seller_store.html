{% extends "tut/base.html" %}
{% load static %}

{% block content %}

<section class="section-content padding-y bg">
<div class="container">
	<div class="row">

		<!-- Seller Info Sidebar -->
		<aside class="col-md-3">
			<div class="card shadow-sm mb-4">
				<div class="card-body text-center">
					<h5 class="card-title">{{ seller.seller_name }}</h5>
					<p class="text-muted mb-1">
						<i class="fas fa-map-marker-alt"></i> {{ seller.seller_profile.city }}, {{ seller.seller_profile.country }}
					</p>
					<p class="small text-muted">
						{{ seller.seller_profile.address_line_1 }} {{ seller.seller_profile.address_line_2 }}
					</p>
				</div>
			</div>
		</aside>

		<!-- Seller Products -->
		<main class="col-md-9">
			<article class="card">
				<header class="card-header d-flex justify-content-between align-items-center">
					<h4 class="mb-0">Products by {{ seller.seller_name }}</h4>
					<span class="text-muted">{{ products|length }} items found</span>
				</header>

				<div class="card-body">
					<div class="row">
						{% for product in products %}
						<div class="col-md-4 mb-4">
							<figure class="card card-product-grid">
								<div class="img-wrap"> 
									<img src="{{ product.image.url }}" alt="{{ product.product_title }}">
								</div>
								<figcaption class="info-wrap">
									<div class="fix-height">
										<a href="{% url 'product_detail' product.slug %}" class="title">
											{{ product.product_title }}
										</a>
										<div class="price-wrap mt-2">
											<span class="price">${{ product.price }}</span>
										</div>
									</div>
									<div class="d-flex justify-content-between mt-2">
										<a href="{% url 'product_detail' product.slug %}" class="btn btn-sm btn-outline-primary">
											View Details
										</a>
										{% if product.id in cart_products %}
										<a href="{% url 'cart'  %}" class="btn btn-sm btn-success">
											Go to Cart
										</a>
										{% else %}
										<a href="{% url 'add_to_cart' product.pk %}" class="btn btn-sm btn-primary">
											Add to Cart
										</a>
										{% endif %}
									</div>
								</figcaption>
							</figure>
						</div>
						{% empty %}
						<div class="col-12 text-center text-muted">
							<p>No products available from this seller yet.</p>
						</div>
						{% endfor %}
					</div>

					<!-- Static Pagination -->
					<nav class="mt-4" aria-label="Page navigation sample">
						{% if products.has_other_pages %}

							<ul class="pagination">

								{% if products.has_previous %}
									<li class="page-item"><a class="page-link" href="?page={{products.previous_page_number}}">Previous</a></li>
								{% else %}
									<li class="page-item disabled"><a class="page-link" href="#">Previous</a></li>
								{% endif %}

								{% for i in products.paginator.page_range %}

									{% if products.number == i %}
										<li class="page-item active"><a class="page-link" href="#">{{i}}</a></li>
									{% else %}
										<li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
									{% endif %}

								{% endfor %}

								{% if products.has_next %}
									<li class="page-item"><a class="page-link" href="?page={{products.next_page_number}}">Next</a></li>
								{% else %}
									<li class="page-item disabled"><a class="page-link" href="#">Next</a></li>
								{% endif %}

							</ul>

						{% endif %}
					</nav>
					<!-- End Pagination -->

				</div>
			</article>
		</main>

	</div>
</div>
</section>

{% endblock content %}
